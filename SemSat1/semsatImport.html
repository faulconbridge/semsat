<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

<?php
	// automatically detects formatting of linebreaks
	ini_set('auto_detect_line_endings',TRUE);
	setlocale(LC_ALL, "en_US.UTF-8");
	
	// as long as there was actually a file uploaded...
	if (($handle = fopen($_FILES['file']['tmp_name'], "r")) !== FALSE) {

		$header = array(1,2,3,4,5,6,7,8,9,10,11,12);
		// this will contain all of the actual data uploaded
		$data = array();
		
		// until every row has been read in
		while ($row = fgetcsv($handle)) {
			
			// set up a temporary array
			$arr = array();
			
			// for each column, set that header as the index key
			foreach ($header as $i => $col) {
				
				// set that cell as the value
				$arr[$col] = $row[$i];
			}
			
			// append the data to your array
			$data[] = $arr;
		}
		
		// closes the file
		fclose($handle);
		
		// constructs an array for the cleaned-up data
		$cleanedData = array();
		$PID = 0;
		
		foreach($data as &$event) {
			if(is_int($event[1])) {
				$PID = $event[1];
			} elseif($event[1]=="filler related" || $event[1]=="filler unrelated") {
				$temp = array($PID,$event[1],$event[2],$event[3],$event[4],
					$event[5],"","","","",$event[7],$event[8],$event[9]);
				array_push($cleanedData, $temp);
			} else {
				$temp = array($PID,$event[1],$event[2],$event[3],$event[4],
					$event[5],$event[6],$event[7],$event[8],$event[9],
					$event[10],$event[11],$event[12]);
				array_push($cleaned_data, $temp);
			}
		}
	}
?>
</body>
</html>